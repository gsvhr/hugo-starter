{{ $bootstrapJs := resources.Get "js/bootstrap.min.js" | fingerprint | resources.Copy "js/bootstrap.min.js" }}
{{ $mainJsSrc := resources.Get "js/main.js" }}
{{ $formJsSrc := resources.Get "js/form.js" }}
{{ $opts := dict
  "minify" (not hugo.IsDevelopment)
  "sourceMap" (cond hugo.IsDevelopment "external" "")
  "targetPath" "js/main.js"
}}
{{ $formOpts := dict
  "minify" (not hugo.IsDevelopment)
  "sourceMap" (cond hugo.IsDevelopment "external" "")
  "targetPath" "js/form.js"
}}
{{ $mainJs := $mainJsSrc | js.Build $opts }}
{{ $formJs := $formJsSrc | js.Build $formOpts }}

{{ if hugo.IsDevelopment }}
  <script src="{{ $bootstrapJs.RelPermalink }}"></script>
  <script src="{{ $mainJs.RelPermalink }}"></script>
  <script src="{{ $formJs.RelPermalink }}"></script>
{{ else }}
  {{ $mainJsFingerprinted := $mainJs | fingerprint }}
  {{ $formJsFingerprinted := $formJs | fingerprint }}
  <script defer src="{{ $bootstrapJs.RelPermalink }}"></script>
  <script defer src="{{ $mainJsFingerprinted.RelPermalink }}" integrity="{{ $mainJsFingerprinted.Data.Integrity }}" crossorigin="anonymous"></script>
  <script defer src="{{ $formJsFingerprinted.RelPermalink }}" integrity="{{ $formJsFingerprinted.Data.Integrity }}" crossorigin="anonymous"></script>
{{ end }}